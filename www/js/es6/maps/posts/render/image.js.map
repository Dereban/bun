{"version":3,"sources":["posts/render/image.ts"],"names":[],"mappings":"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","file":"posts/render/image.js","sourcesContent":["/*\n Image thumbnail HTML rendering\n*/\n\nimport {config} from '../../state'\nimport {escape} from 'underscore'\nimport options from '../../options'\nimport {\n\tparseHTML, commaList, parseAttributes, ElementAttributes\n} from '../../util'\nimport {ImageData, fileTypes} from '../models'\nimport {images as lang} from '../../lang'\n\n// Render a thumbnail of an image, according to configuration settings\nexport function renderImage(data: ImageData, reveal?: boolean): string {\n\tconst showThumb = options.get(\"thumbs\") !== 'hide' || reveal\n\treturn parseHTML\n\t\t`<figure>\n\t\t\t${renderFigcaption(data, reveal)}\n\t\t\t${config.images.hats && showThumb ? '<span class=\"hat\"></span>': ''}\n\t\t\t${showThumb ? renderThumbnail(data) : ''}\n\t\t</figure>`\n}\n\n// Render the information caption above the image\nexport function renderFigcaption(data: ImageData, reveal: boolean): string {\n\tconst list = commaList([\n\t\tdata.audio ? '\\u266B' : '',\n\t\tdata.length.toString(),\n\t\treadableFilesize(data.size),\n\t\t`${data.dims[0]}x${data.dims[1]}`,\n\t\tdata.apng ? 'APNG' : ''\n\t])\n\treturn parseHTML\n\t\t`<figcaption>\n\t\t\t${hiddenToggle(reveal)}\n\t\t\t${imageSearch(data)}\n\t\t\t<span>\n\t\t\t\t(${list})\n\t\t\t</span>\n\t\t\t${imageLink(data)}\n\t\t</figcaption>`\n}\n\n// Renders a human readable file size string\nfunction readableFilesize(size: number): string {\n\tif (size < 1024) {\n\t\treturn size + ' B'\n\t}\n\tif (size < 1048576) {\n\t\treturn Math.round(size / 1024) + ' KB'\n\t}\n\tconst text = Math.round(size / 104857.6).toString()\n\treturn `${text.slice(0, -1)}.${text.slice(-1)} MB`\n}\n\n// Render the button for toggling hidden thumbnails\nfunction hiddenToggle(reveal: boolean): string {\n\tif (options.get('thumbs') !== 'hide') {\n\t\treturn ''\n\t}\n\treturn parseHTML\n\t\t`<a class=\"imageToggle\">\n\t\t\t[${lang[reveal ? 'hide' : 'show']}]\n\t\t</a>`\n}\n\n// Base URLs of image addresses\nconst imagePaths: {[type: string]: string} = {\n\tsrc: '/img/src/',\n\tthumb: '/img/thumb/',\n\tmid: '/img/mid/',\n\tspoil: '/ass/spoil/spoiler'\n}\n\ntype ISTemplate = (data: ImageData) => string\n\n// Generate template functions for each image search engine\nconst searchTemplates = (function() {\n\tconst models = [\n\t\t{\n\t\t\tengine: 'google',\n\t\t\turl: 'https://www.google.com/searchbyimage?image_url=',\n\t\t\ttype: 'thumb',\n\t\t\tsymbol: 'G'\n\t\t},\n\t\t{\n\t\t\tengine: 'iqdb',\n\t\t\turl: 'http://iqdb.org/?url=',\n\t\t\ttype: 'thumb',\n\t\t\tsymbol: 'Iq'\n\t\t},\n\t\t{\n\t\t\tengine: 'saucenao',\n\t\t\turl: 'http://saucenao.com/search.php?db=999&url=',\n\t\t\ttype: 'thumb',\n\t\t\tsymbol: 'Sn'\n\t\t},\n\t\t{\n\t\t\tengine: 'desustorage',\n\t\t\ttype: 'MD5',\n\t\t\turl: 'https://desustorage.org/_/search/image/',\n\t\t\tsymbol: 'Ds'\n\t\t},\n\t\t{\n\t\t\tengine: 'exhentai',\n\t\t\ttype: 'SHA1',\n\t\t\turl: 'http://exhentai.org/?fs_similar=1&fs_exp=1&f_shash=',\n\t\t\tsymbol: 'Ex'\n\t\t}\n\t]\n\n\tconst templates: {[engine: string]: ISTemplate} = {}\n\tfor (let {engine, url, type, symbol} of models) {\n\t\tconst attrs: ElementAttributes = {\n\t\t\ttarget: '_blank',\n\t\t\trel: 'nofollow',\n\t\t\tclass: 'imageSearch ' + engine\n\t\t}\n\t\ttemplates[engine] = data => {\n\t\t\tif (!options.get(engine)) {\n\t\t\t\treturn ''\n\t\t\t}\n\t\t\tattrs['href'] = url\n\t\t\t\t+ (type === 'thumb' ? thumbPath(data, false) : data[type])\n\t\t\treturn parseHTML\n\t\t\t\t`<a ${parseAttributes(attrs)}>\n\t\t\t\t\t${symbol}\n\t\t\t\t</a>`\n\t\t}\n\t}\n\n\treturn templates\n})()\n\n// Render image search links in accordance to client settings\nfunction imageSearch(data: ImageData): string {\n\tlet html = ''\n\n\t// Only render google for PDFs\n\tif (data.fileType === fileTypes.pdf) {\n\t\tif (options.get(\"google\")) {\n\t\t\treturn searchTemplates['google'](data)\n\t\t}\n\t\treturn ''\n\t}\n\tfor (let engine in searchTemplates) {\n\t\thtml += searchTemplates[engine](data)\n\t}\n\treturn html\n}\n\n// Get the thumbnail path of an image, accounting for not thumbnail of specific\n// type being present\nfunction thumbPath(data: ImageData, mid: boolean): string {\n\tconst type = mid ? 'mid' : 'thumb'\n\tlet ext: string\n\tswitch (data.fileType) {\n\tcase fileTypes.mp4:\n\tcase fileTypes.jpeg:\n\t\text = '.jpg'\n\t\tbreak\n\tcase fileTypes.png:\n\tcase fileTypes.gif:\n\tcase fileTypes.webm:\n\tcase fileTypes.pdf:\n\tcase fileTypes.mp3:\n\tcase fileTypes.ogg:\n\t\text = '.png'\n\t\tbreak\n\t}\n\treturn imagePaths[type] + data.file + ext\n}\n\n// Resolve the path to the source file of an upload\nfunction sourcePath({file, fileType}: ImageData): string {\n\treturn imagePaths['src'] + file + sourceExtension(fileType)\n}\n\n// Resolve the extension of the source file\nfunction sourceExtension(fileType: fileTypes): string {\n\tconst extensions: {[type: number]: string} = {\n\t\t[fileTypes.jpeg]: '.jpg',\n\t\t[fileTypes.png]: '.png',\n\t\t[fileTypes.gif]: '.gif',\n\t\t[fileTypes.webm]: '.webm',\n\t\t[fileTypes.pdf]: '.pdf',\n\t\t[fileTypes.svg]: '.svg',\n\t\t[fileTypes.mp4]: '.mp4',\n\t\t[fileTypes.mp3]: '.mp3',\n\t\t[fileTypes.ogg]: '.ogg'\n\t}\n\treturn extensions[fileType]\n}\n\n// Render a name + download link of an image\nfunction imageLink(data: ImageData): string {\n\tlet name = '',\n\t\t{file, fileType, imgnm} = data\n\tconst m = imgnm.match(/^(.*)\\.\\w{3,4}$/)\n\tif (m) {\n\t\tname = m[1]\n\t}\n\tconst fullName = escape(imgnm),\n\t\ttooLong = name.length >= 38\n\tif (tooLong) {\n\t\timgnm = escape(name.slice(0, 30))\n\t\t\t+ '(&hellip;)'\n\t\t\t+ escape(sourceExtension(fileType))\n\t}\n\tconst attrs: ElementAttributes = {\n\t\thref: sourcePath(data),\n\t\trel: 'nofollow',\n\t\tdownload: fullName\n\t}\n\tif (tooLong) {\n\t\tattrs['title'] = fullName\n\t}\n\treturn parseHTML\n\t\t`<a ${parseAttributes(attrs)}>\n\t\t\t${imgnm}\n\t\t</a>`\n}\n\n// Render a hat on top of the thumbnail, if enabled\nfunction renderHat(showThumb: boolean): string {\n\tif (showThumb && config.images.hats) {\n\t\treturn '<span class=\"hat\"></span>'\n\t}\n\treturn ''\n}\n\n// Render the actual thumbnail image\nexport function renderThumbnail(data: ImageData, href?: string): string {\n\tconst src = sourcePath(data)\n\tlet thumb: string,\n\t\t[width, height, thumbWidth, thumbHeight] = data.dims\n\n\tif (data.spoiler && options.get('spoilers')) {\n\t\t// Spoilered and spoilers enabled\n\t\tthumb = imagePaths['spoil'] + data.spoiler + '.jpg'\n\t\tthumbWidth = thumbHeight = 250\n\t} else if (data.fileType === fileTypes.gif && options.get('autogif')) {\n\t\t// Animated GIF thumbnails\n\t\tthumb = src\n\t} else {\n\t\tthumb = thumbPath(data, options.get('thumbs') !== 'small')\n\t}\n\n\tconst linkAttrs: ElementAttributes = {\n\t\ttarget: '_blank',\n\t\trel: 'nofollow',\n\t\thref: href || src\n\t}\n\tconst imgAttrs: ElementAttributes = {\n\t\tsrc: thumb,\n\t\twidth: thumbWidth.toString(),\n\t\theight: thumbHeight.toString()\n\t}\n\n\t// Catalog pages\n\tif (href) {\n\t\t// Handle the thumbnails with the HTML5 History controller\n\t\tlinkAttrs['class'] = 'history'\n\n\t\t// No image hover previews\n\t\timgAttrs['class'] = 'expanded'\n\t\tif(options.get('thumbs') === 'hide') {\n\t\t\timgAttrs['style'] = 'display: none'\n\t\t}\n\t}\n\n\treturn parseHTML\n\t\t`<a ${parseAttributes(linkAttrs)}>\n\t\t\t<img ${parseAttributes(imgAttrs)}>\n\t\t</a>`\n}\n"],"sourceRoot":"/source/"}