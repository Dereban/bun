"use strict";var _slicedToArray=function(){function r(r,t){var e=[],n=!0,a=!1,o=void 0;try{for(var i,u=r[Symbol.iterator]();!(n=(i=u.next()).done)&&(e.push(i.value),!t||e.length!==t);n=!0);}catch(l){a=!0,o=l}finally{try{!n&&u["return"]&&u["return"]()}finally{if(a)throw o}}return e}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return r(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();System.register(["../../state","underscore","./etc"],function(r,t){function e(r){r.state||(r.state=[0,0,0]);var t=n(r.body,r);return r.state[1]&&(t+="</em>"),r.state[2]&&(t+="</del>"),t}function n(r,t){for(var e=r.split("\n"),n=t.state,o="",i=0;i<e.length;i++){n[0]&&i%2&&(n[1]%2&&(o+="</em>",n[1]++),o+="<br>",n[0]=0);var u=e[i];if(!n[0]&&u.startsWith(">")&&(o+="<em>",n[1]++),r){var l=!0,s=!1,c=void 0;try{for(var f,v=u.split(" ")[Symbol.iterator]();!(l=(f=v.next()).done);l=!0){var y=f.value;o+=a(y,t),n[0]=1}}catch(d){s=!0,c=d}finally{try{!l&&v["return"]&&v["return"]()}finally{if(s)throw c}}}}return o}function a(r,t){for(var e=r.split(/\[\/?spoiler]/i),n="",a=0;a<e.length;a++){a%2&&(n+="<"+(t.state[2]++%2?"/":"")+"del>");var u=e[a];n+=/^>>\d+$/.test(u)?o(u,t.links):/^>>>\/\w+\//.test(u)?i(u):/^https?:\/\/[^-A-Za-z0-9+&@#\/%?=~_]$/.test(u)?l(u):/<strong>.+<\/strong>/.test(u)?u:c.escape(u)}return n}function o(r,t){if(!t)return r;var e=parseInt(r.match(/^>>\/(\d+)$/)[1]),n=t[e];return n?f.renderPostLink(e,n.board,n.op):r}function i(r){var t=r.match(/^>>>\/(\w+)\/$/)[1],e=v[t];return e?u(e,r):r}function u(r,t){return'<a href="'+r+'" target="_blank">'+t+"</a>"}function l(r){return u(encodeURI(r),r)}var s,c,f,v,y;t&&t.id;return r("renderBody",e),r("renderFragment",n),{setters:[function(r){s=r},function(r){c=r},function(r){f=r}],execute:function(){var r;v={},r=s.config,y=r.boards,r;var t=!0,e=!1,n=void 0;try{for(var a,o=y.enabled[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var i=a.value;v[i]="../"+i+"/"}}catch(u){e=!0,n=u}finally{try{!t&&o["return"]&&o["return"]()}finally{if(e)throw n}}var l=!0,c=!1,f=void 0;try{for(var d,h=y.psuedo.concat(y.links)[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var b=_slicedToArray(d.value,2),m=b[0],p=b[1];v[m]=p}}catch(u){c=!0,f=u}finally{try{!l&&h["return"]&&h["return"]()}finally{if(c)throw f}}}}});
//# sourceMappingURL=../../maps/posts/render/body.js.map
